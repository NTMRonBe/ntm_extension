<?xml version="1.0"?>
<openerp>
    <data>
    <!-- 
    
               <report id="report_bank_transfer_print"
            string="Bank Transfer"
            model="bank.transfer"
            name="bank.transfer"
            rml="ntm_extension/report/bank_transfer.rml"
            auto="False"
            attachment="(object.name)"
            header = "False"
            menu="True"/> -->
            
        <record id="btl_add_view" model="ir.ui.view">
            <field name="name">Add Account</field>
            <field name="model">bank.transfer.line.add</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
	            <form string="Add Account">
	                <separator string="Add Account" colspan="6"/>
		                <group colspan="6" col="6">
		                    <field name="partner_id" on_change="onchange_partner(partner_id)"/>
		                    <field name="account_number" domain="[('type','=',type),('partner_id','=',partner_id)]"/>
                            <field name="analytic_id" domain="[('partner_id','=',partner_id)]"/>
		                    <field name="amount"/>
		                    <field name="type"/>
		                </group>
		                <button name="add_account" string="Add Account" type="object" icon="terp-camera_test"/>
	            </form>
            </field>
        </record>

        <record id="action_btl_add" model="ir.actions.act_window">
            <field name="name">Add Account</field>
            <field name="res_model">bank.transfer.line.add</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="btl_add_view"/>
            <field name="target">new</field>
        </record>
    
        <record id="view_ntm_res_partner_bank_form" model="ir.ui.view">
            <field name="name">ntm.res.partner.bank.inherit</field>
            <field name="model">res.partner.bank</field>
            <field name="type">form</field>
            <field name="priority">2</field>
            <field name="inherit_id" ref="base.view_partner_bank_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="replace">
                    <field name="partner_id" attrs="{'invisible':[('ownership','=','company')],'required':[('ownership','=','entity')]}"/>
                </field>
                <field name="acc_number" position="after">
                    <field name="ownership" required="1" invisible="1"/>
                    <field name="type" required="True"/>
                </field>
                <field name="state_id" position="after">
                    <group colspan="6" col="6" attrs="{'invisible':[('ownership','!=','company')]}">
                        <separator string="Account Details" colspan="6"/>
                        <field name="journal_id" on_change="onchange_journal(journal_id)" attrs="{'required':[('ownership','=','company')]}"/>
                        <field name="account_id"/>
                        <field name="transit_id" domain="[('type','!=','view')]"/>
                        <field name="currency_id" invisible="True"/>
                    </group>
                </field>
            </field>
        </record>
        
        <record id="view_ntm_res_partner_bank_tree" model="ir.ui.view">
            <field name="name">ntm.res.partner.bank.inherit.tree</field>
            <field name="model">res.partner.bank</field>
            <field name="type">tree</field>
            <field name="priority">2</field>
            <field name="inherit_id" ref="base.view_partner_bank_tree"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="replace">
                    <field name="partner_id" attrs="{'invisible':[('ownership','=','company')]}"/>
                </field>
                <field name="owner_name" position="after">
                    <field name="balance"/>
                </field>
                <field name="owner_name" position="before">
                    <field name="bank"/>
                    <field name="account_id"/>
                    <field name="transit_id"/>
                </field>
                <field name="acc_number" position="after">
                    <field name="currency_id"/>
                </field>
            </field>
        </record>
        
		<record model="ir.ui.view" id="view_bank_transfer_tree">
            <field name="name">bank.transfer.tree</field>
            <field name="model">bank.transfer</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Bank Transfer">
                    <field name="name"/>
                    <field name="journal_id"/>
                    <field name="period_id"/>
                    <field name="date"/>
                    <field name="handler"/>
                </tree>
            </field>
        </record>
		
		<record id="view_bank_transfer_filter" model="ir.ui.view">
            <field name="name">bank.transfer.filter</field>
            <field name="model">bank.transfer</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Bank Transfer">
                    <field name="name"/>
                    <field name="journal_id"/>
                    <field name="period_id"/>
                    <field name="date"/>
                    <field name="handler"/>	    
                    </search>
            </field>
        </record>      
		
		<record id="view_bank_transfer_form" model="ir.ui.view">
            <field name="name">bank.transfer.form</field>
            <field name="model">bank.transfer</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Bank Transfer">
                    <group colspan="6" col="6">
	                    <field name="name"/>
	                    <field name="journal_id" domain="[('type','=','bank')]" widget="selection"/>
	                    <field name="period_id"/>
	                    <field name="date"/>
	                    <field name="handler"/>
	                    <field name="ref"/>
	                    <field name="amount" readonly="True"/>
                    </group>
                    <notebook>
                        <page string="Savings and Checking Accounts">
                        <button name="%(action_btl_add)d" states="draft" string="Add Account" type="action" icon="terp-camera_test"/>
                        <separator string="Savings Accounts" colspan="6"/>
		                    <group colspan="6" col="2">
			                    <field colspan="6" mode="tree,form" name="savings_ids" nolabel="1" domain="[('type','=','savings')]" readonly="True">
			                       <tree string="Savings Accounts" editable="bottom">
			                           <field name="partner_id"/>
			                           <field name="account_number" domain="[('type','=',type),('partner_id','=',partner_id)]"/>
			                           <field name="analytic_id" domain="[('partner_id','=',partner_id)]"/>
			                           <field name="amount"/>
			                           <field name="type" invisible="True"/>
			                       </tree>
			                       <form string="Savings Accounts">
		                               <field name="partner_id"/>
		                               <field name="account_number"/>
		                               <field name="analytic_id"/>
		                               <field name="amount"/>
		                               <field name="type"/>
		                           </form>
			                    </field>
		                    </group>
		                    <separator string="Checking Accounts" colspan="6"/>
		                    <group colspan="6" col="2">
                                <field colspan="6" mode="tree,form" name="checking_ids" nolabel="1" readonly="True" domain="[('type','=','checking')]">
                                   <tree string="Checking Accounts" editable="bottom">
                                       <field name="partner_id"/>
                                       <field name="account_number"/>
                                       <field name="analytic_id"/>
                                       <field name="amount"/>
                                       <field name="type" invisible="True"/>
                                   </tree>
                                   <form string="Checking Accounts">
                                       <field name="partner_id"/>
                                       <field name="account_number"/>
                                       <field name="analytic_id"/>
                                       <field name="amount"/>
                                       <field name="type" invisible="True"/>
                                   </form>
                                </field>
                            </group>
	                    </page>
	                    <page string="Journal Entries">
	                       <field name="move_id" colspan="6" readonly="1"/>
	                       <field name="move_ids" colspan="6" readonly="1" nolabel="True"/>
	                    </page>
                    </notebook>
                    <group colspan="4" col="13">
                                <field name="state" select="1"/>
                                <button name="complete" attrs="{'invisible':[('state','!=','draft')]}" string="Transfer"  type="object" icon="gtk-jump-to"/>
                                <button name="cancel" attrs="{'invisible':[('state','!=','done')]}" string="Cancel"  type="object" icon="gtk-jump-to"/>
                                <button string="Print Request" type="object" name="data_get" icon="gtk-execute" attrs="{'invisible':[('state','!=','done')]}" />
                            </group>
                </form>
            </field>
        </record>     
        <record id="action_bank_transfer_tree" model="ir.actions.act_window">
            <field name="name">Bank Transfer</field>
            <field name="res_model">bank.transfer</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="view_bank_transfer_tree"/>
            <field name="search_view_id" ref="view_bank_transfer_filter"/>
        </record>
        
        <record id="action_ntm_res_partner_bank_company_tree" model="ir.actions.act_window">
            <field name="name">Company Bank Accounts</field>
            <field name="res_model">res.partner.bank</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="context">{'ownership':'company'}</field>
            <field name="domain">[('ownership','=','company')]</field>
        </record>
        
        <record id="action_ntm_res_partner_bank_entity_tree" model="ir.actions.act_window">
            <field name="name">Missionary Bank Accounts</field>
            <field name="res_model">res.partner.bank</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="context">{'ownership':'entity'}</field>
            <field name="domain">[('ownership','=','entity')]</field>
        </record>



        <record model="ir.ui.view" id="view_bank_transfer_schedule_tree">
            <field name="name">bank.transfer.schedule.tree</field>
            <field name="model">bank.transfer.schedule</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Bank Schedules">
	                <field name="company_bank_id"/>
                    <field name="company_bank_name"/>
	                <field name="account_id"/>
	                <field name="entity_bank_id" domain="[('partner_id.name','=',account_name)]"/>
                </tree>
            </field>
        </record>
        
        <record id="view_bank_transfer_schedule_form" model="ir.ui.view">
            <field name="name">bank.transfer.schedule.form</field>
            <field name="model">bank.transfer.schedule</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Bank Transfer">
                     <group colspan="4" col="4">
	                    <group colspan="2" col="2">
	                        <separator string="Bank Details"/>
	                        <field name="company_bank_name"/>
	                        <field name="company_bank_id"/>
	                        <field name="company_acc_name"/>
	                    </group>
	                    <group colspan="2" col="2">
	                        <separator string="Recipient Details"/>
	                        <field name="account_id"/>
	                        <field name="account_name" invisible="1"/>
	                        <field name="entity_bank_id" domain="[('partner_id.name','=',account_name)]"/>
	                        <field name="entity_bank_name"/>
	                    </group>
                    </group>
                    <separator string="Transfer Details" colspan="4"/>
                    <group col="2" colspan="2">
                        <separator colspan="4" string="Starts on"/>
                        <field name="date_start" select="1"/>
                        <field name="period_total"/>
                        <field name="amount"/>
                    </group>

                    <group col="2" colspan="2">
                        <separator colspan="4" string="Valid Up to"/>
                        <field name="period_nbr" attrs="{'readonly':[('period_type','=','bimonthly')]}"/>
                        <field name="period_type"/>
                        <button name="compute" string="Compute" type="object" icon="terp-stock_format-scientific" />
                    </group>
                    <separator string="Remarks"/>
                    <field name="remarks" colspan="4" nolabel="1"/>
                    <group colspan="4" col="2">
                        <field colspan="4" mode="tree,form" name="lines_id" nolabel="1">
                            <tree string="Schedule Requests">
                                <field name="name"/>
                                <field name="date"/>
                                <field name="state"/>
                                <button name="cancel" string="Compute" type="object" icon="gtk-remove" attrs="{'invisible':[('state','=','cancel')]}"/>
                            </tree>
                        </field>
                    </group>
                </form>
            </field>
        </record> 
          
        <record id="action_bank_transfer_schedule_tree" model="ir.actions.act_window">
            <field name="name">Bank Transfer Schedules</field>
            <field name="res_model">bank.transfer.schedule</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="view_bank_transfer_schedule_tree"/>
        </record>
        
        
        <record model="ir.ui.view" id="view_bank_transfer_request_tree">
            <field name="name">bank.transfer.request.tree</field>
            <field name="model">bank.transfer.request</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Transfer Request">
                    <field name="name"/>
                     <field name="company_bank_id"/>
                     <field name="entity_bank_id"/>
                     <field name="account_id"/>
                     <field name="date"/>
                     <field name="amount"/>
                     <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="view_bank_transfer_requests_form" model="ir.ui.view">
            <field name="name">bank.transfer.request.form</field>
            <field name="model">bank.transfer.request</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Transfer Requests">
                    <group colspan="4" col="4">
                    <group colspan="2" col="2">
                        <separator string="Bank Details"/>
                        <field name="company_bank_name"/>
                        <field name="company_bank_id"/>
                        <field name="company_acc_name"/>
                    </group>
                    <group colspan="2" col="2">
                        <separator string="Recipient Details"/>
                        <field name="account_id"/>
                        <field name="account_name" invisible="1"/>
                        <field name="entity_bank_id" domain="[('partner_id.name','=',account_name)]"/>
                        <field name="entity_bank_name"/>
                    </group>
                    </group>
                    <separator string="Transfer Details" colspan="4"/>
                    <group colspan="4" col="4">
                        <group colspan="2" col="2">
                            <field name="name" invisible="1"/>
                            <field name="date"/>
                            <field name="amount"/>    
                        </group>
                        <group colspan="2" col="2">
                            <field name="is_special"/>
                            <field name="state"/>
                        </group>
                    </group>
                    <separator string="Remarks" colspan="2"/>
                    <newline/>
                    <field name="remarks" colspan="4" nolabel="1"/>
                </form>
            </field>
        </record> 
        
        <record id="action_bank_transfer_request_tree" model="ir.actions.act_window">
            <field name="name">Transfer Request</field>
            <field name="res_model">bank.transfer.request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="view_bank_transfer_request_tree"/>
        </record>
        
        
       </data>
</openerp>
