<?xml version="1.0"?>
<openerp>
    <data>
    
        <record id="view_ntm_res_partner_bank_form" model="ir.ui.view">
            <field name="name">ntm.res.partner.bank.inherit</field>
            <field name="model">res.partner.bank</field>
            <field name="type">form</field>
            <field name="priority">2</field>
            <field name="inherit_id" ref="base.view_partner_bank_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="replace">
                    <field name="partner_id" attrs="{'invisible':[('ownership','=','company')],'required':[('ownership','=','entity')]}"/>
                </field>
                <field name="acc_number" position="after">
                    <field name="ownership" required="1" invisible="1"/>
                    <field name="type" required="True"/>
                </field>
            </field>
        </record>
        <record id="bank_account_journal_ntm_form" model="ir.ui.view">
            <field name="name">bank.account.journal.ntm.form</field>
            <field name="model">account.journal</field>
            <field name="type">form</field>
            <field name="priority">2</field>
            <field name="inherit_id" ref="account.view_account_journal_form"/>
            <field name="arch" type="xml">
                <field name="default_credit_account_id" position="after">
                    <field name="bank_id"/>
                </field>
            </field>
        </record>
		<record model="ir.ui.view" id="view_bank_transfer_tree">
            <field name="name">bank.transfer.tree</field>
            <field name="model">bank.transfer</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Bank Transfer">
                    <field name="name"/>
                    <field name="journal_id"/>
                    <field name="period_id"/>
                    <field name="date"/>
                    <field name="handler"/>
                </tree>
            </field>
        </record>
		
		<record id="view_bank_transfer_filter" model="ir.ui.view">
            <field name="name">bank.transfer.filter</field>
            <field name="model">bank.transfer</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Bank Transfer">
                    <field name="name"/>
                    <field name="journal_id"/>
                    <field name="period_id"/>
                    <field name="date"/>
                    <field name="handler"/>	    
                    </search>
            </field>
        </record>      
		
		<record id="view_bank_transfer_form" model="ir.ui.view">
            <field name="name">bank.transfer.form</field>
            <field name="model">bank.transfer</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Bank Transfer">
                    <group colspan="6" col="6">
	                    <field name="name"/>
	                    <field name="journal_id" domain="[('type','=','bank')]" widget="selection"/>
	                    <field name="period_id"/>
	                    <field name="date"/>
	                    <field name="handler"/>
	                    <field name="ref"/>
                    </group>
                    <notebook>
                        <page string="Savings and Checking Accounts">
		                    <group colspan="6" col="2">
			                    <field colspan="6" mode="tree,form" name="line_ids" nolabel="1">
			                       <tree string="Transfer Lines" editable="bottom">
			                           <field name="partner_id" on_change="onchange_partner(partner_id)"/>
			                           <field name="account_number" domain="[('type','=',type),('partner_id','=',partner_id)]"/>
			                           <field name="analytic_id" domain="[('partner_id','=',partner_id)]"/>
			                           <field name="amount"/>
			                           <field name="type"/>
			                       </tree>
			                       <form string="Transfer Line">
		                               <field name="partner_id" on_change="onchange_partner(partner_id)"/>
		                               <field name="account_number"/>
		                               <field name="analytic_id"/>
		                               <field name="amount"/>
		                               <field name="type" invisible="True"/>
		                           </form>
			                    </field>
		                    </group>
		                    <group colspan="4" col="13">
		                        <field name="state" select="1"/>
		                        <button name="complete" attrs="{'invisible':[('state','!=','draft')]}" string="Transfer"  type="object" icon="gtk-jump-to"/>
		                        <button name="cancel" attrs="{'invisible':[('state','!=','done')]}" string="Transfer"  type="object" icon="gtk-jump-to"/>
		                    </group>
	                    </page>
	                    <page string="Journal Entries">
	                       <field name="move_id" colspan="6" readonly="1"/>
	                       <field name="move_ids" colspan="6" readonly="1"/>
	                    </page>
                    </notebook>
                </form>
            </field>
        </record>     
        <record id="action_bank_transfer_tree" model="ir.actions.act_window">
            <field name="name">Bank Transfer</field>
            <field name="res_model">bank.transfer</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="view_bank_transfer_tree"/>
            <field name="search_view_id" ref="view_bank_transfer_filter"/>
        </record>
        
        <record id="action_ntm_res_partner_bank_company_tree" model="ir.actions.act_window">
            <field name="name">Company Bank Accounts</field>
            <field name="res_model">res.partner.bank</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="context">{'ownership':'company'}</field>
            <field name="domain">[('ownership','=','company')]</field>
        </record>
        
        <record id="action_ntm_res_partner_bank_entity_tree" model="ir.actions.act_window">
            <field name="name">Missionary Bank Accounts</field>
            <field name="res_model">res.partner.bank</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="context">{'ownership':'entity'}</field>
            <field name="domain">[('ownership','=','entity')]</field>
        </record>

       </data>
</openerp>
