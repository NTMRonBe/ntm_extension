<?xml version="1.0"?>
<openerp>
    <data>

        <record id="idg_form" model="ir.ui.view">
            <field name="name">idg.form</field>
            <field name="model">income.distribution.generic</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string = "Income Distribution">
                    <group colspan="4" col="4">
                        <field name="name" invisible="1"/>
                        <group colspan="2" col="2">
                            <field name="bank_id" widget="selection" required="1" domain="[('ownership','=','company')]"/>
                            <field name="ref" required="1"/>
                        </group>
                        <group colspan="2" col="2">
	                        <field name="amount" required="1"/>
	                        <field name="charges_included"/>
	                        <field name="bank_charges" attrs="{'invisible':[('charges_included','=',False)]}"/>
                        </group>
                    </group>
                    <separator string="Dates" colspan="4"/>
                    <group colspan="4" col="4">
                        <field name="rdate" attrs="{'readonly':[('state','!=','draft')]}" required="1"/>
                        <field name="ddate" attrs="{'readonly':[('state','!=','received')],'required':[('state','=','received')]}"/>
                    </group>
                    <notebook>
                       <page string="Distribution Details">
                            <field mode="tree,form" name="distribution_ids" nolabel="1">
                                <tree string="Account Distribution List">
                                    <field name="account_id"/>
                                    <field name="remarks"/>
                                    <field name="amount" sum="Total"/>
                                    <field name="charges" sum="Total"/>
                                </tree>
                                <form string="Account Distribution">
                                    <group colspan="4" col="6">
                                        <group colspan="4" col="2">
		                                    <field name="account_id"/>
		                                    <field name="remarks"/>
	                                    </group>
	                                    <group colspan="2" col="2">
		                                    <field name="amount" on_change="onchange_contribute(contribute, amount)"/>
		                                    <field name="contribute" on_change="onchange_contribute(contribute, amount)"/>
		                                    <field name="charges" attrs="{'invisible':[('contribute','=',False)]}"/>
	                                    </group>
                                    </group>
                                </form>
                            </field>
                       </page>
                       <page string="Remarks">
                        <field name="remarks" colspan="4" nolabel="1"/>
                       </page>
                       <page string="Journal Entries">
                            <field name="rmove_ids" mode="tree" nolabel="1">
                                <tree string="Receiving Entries">
                                    <field name="date"/>
                                    <field name="name"/>
                                    <field name="account_id"/>
                                    <field name="analytic_account_id"/>
                                    <field name="debit" sum="Total Debit"/>
                                    <field name="credit" sum="Total Credit"/>
                                    <field name="currency_id" string="Encoding Currency"/>
                                    <field name="amount_currency" string="Encoding Amount"/>
                                </tree>
                            </field>
                            <separator colspan="4"/>
                            <field name="dmove_ids" mode="tree" nolabel="1">
                                <tree string="Distribution Entries">
                                    <field name="date"/>
                                    <field name="name"/>
                                    <field name="account_id"/>
                                    <field name="analytic_account_id"/>
                                    <field name="debit" sum="Total Debit"/>
                                    <field name="credit" sum="Total Credit"/>
                                    <field name="currency_id" string="Encoding Currency"/>
                                    <field name="amount_currency" string="Encoding Amount"/>
                                </tree>
                            </field>
                       </page>
                    </notebook>
                    <group colspan="4" col="13">
                        <field name="state"/>
                        <button name="cancel" attrs="{'invisible':[('state','=','cancel')]}" string="Cancel"  type="object"/>
                        <button name="receive" attrs="{'invisible':[('state','!=','draft')]}" string="Money Received"  type="object" />
                        <button name="distribute" attrs="{'invisible':[('state','!=','received')]}" string="Distribute Donation"  type="object" />
                    </group>
                </form>
            </field>
        </record>        
        <record model="ir.ui.view" id="idg_tree">
            <field name="name">idg.tree</field>
            <field name="model">income.distribution.generic</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Income Distribution">
                    <field name="name"/>
                    <field name="rdate"/>
                    <field name="ddate"/>
                    <field name="bank_id"/>
                    <field name="amount" required="1"/>
                    <field name="bank_charges"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_idg_form">
            <field name="name">Income Distribution</field>
            <field name="res_model">income.distribution.generic</field>
            <field name="view_type">form</field>
        </record>
        <record model="ir.actions.act_window.view" id="action_idg_tree">
            <field name="act_window_id" ref="action_idg_form"/>
            <field name="view_id" ref="idg_tree"/>
            <field name="view_mode">tree</field>
            <field name="sequence">10</field>
        </record>
        <record model="ir.actions.act_window.view" id="action_idg_form">
            <field name="act_window_id" ref="action_idg_form"/>
            <field name="view_id" ref="idg_form"/>
            <field name="view_mode">form</field>
            <field name="sequence">20</field>
        </record>
        
        
        
        
        
        <!-- VOucher DIstribution Canada and US -->
        
        
         <record id="voucher_distribution_form" model="ir.ui.view">
            <field name="name">voucher.distribution.form</field>
            <field name="model">voucher.distribution</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string = "Voucher Distribution">
                    <group colspan="4" col="4">
                        <field name="name" invisible="1"/>
                        <field name="date"/>
                        <field name="period_id"/>
                    </group>
                    <group colspan="4" col="4">
                        <group colspan="2" col="2">
                            <field name="country" widget="selection"/>
                            <field name="generated" invisible="1"/>
                        </group>
                        <group colspan="2" col="2">
                            <button name="%(action_view_voucher_file_import)d" string="Generate Voucher" type="action" icon="gtk-apply" attrs="{'invisible':[('generated','=',True)]}"/>
                            <button name="match_accounts" string="Match" type="object" icon="gtk-apply"/>
                            <button name="check_accounts" string="Check" type="object" icon="gtk-apply"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Voucher Lines">
                            <field name="voucher_lines" mode="tree" nolabel="1" height="40">
                                <tree string="Voucher Lines">
                                    <field name="name"/>
                                    <field name="comments"/>
                                    <field name="co1"/>
                                    <field name="batch_date"/>
                                    <field name="doc_num"/>
                                    <field name="code"/>
                                    <field name="account_name"/>
                                    <field name="type"/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Personal Section">
                            <field name="dp_section" mode="tree" nolabel="1">
                                <tree string="Deposits to Personal" editable="top">
                                    <field name="name"/>
                                    <field name="account_name"/>
                                    <field name="account_id" on_change="onchange_accountid(account_id)"/>
                                    <field name="analytic_id" on_change="onchange_analyticid(analytic_id)"/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                            <field name="pdv_section" mode="tree" nolabel="1">
                                <tree string="Personal Disbursements and Vouchers" editable="top">
                                    <field name="name"/>
                                    <field name="account_name"/>
                                    <field name="account_id" on_change="onchange_accountid(account_id)"/>
                                    <field name="analytic_id" on_change="onchange_analyticid(analytic_id)"/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Expense Charging">
                            <group colspan="4" col="4">
                                <field name="postage_recovery"/>
                                <field name="envelope_recovery"/>
                                <field name="missionary_subtotal"/>
                                <field name="recovery_charges"/>
                                <field name="natw_total_charges"/>
                            </group>
                            <separator colspan="4"/>
                            <notebook colspan="4">
                                <page string="Email Charges">
		                            <field name="email_charges" mode="tree" nolabel="1">
		                                <tree string="Email Charging" editable="top">
		                                    <field name="name" readonly="1"/>
		                                    <field name="account_id"/>
		                                    <field name="amount" readonly="1" sum="Total"/>
		                                </tree>
		                            </field>
		                        </page>
		                        <page string="N@W Charges">
		                            <field name="natw_charges" mode="tree" nolabel="1" readonly="1">
		                                <tree string="N@W Charges">
		                                    <field name="name" readonly="1"/>
		                                    <field name="amount" readonly="1" sum="Total"/>
		                                </tree>
		                            </field>
		                        </page>
		                        <page string="Account Charging">
		                            <field name="charging_lines" mode="tree" nolabel="1">
		                                <tree string="Charged Accounts">
		                                    <field name="name"/>
		                                    <field name="contingency"/>
		                                    <field name="postage"/>
		                                    <field name="natw"/>
		                                    <field name="extra"/>
		                                    <field name="total"/>
		                                </tree>
		                            </field>
		                        </page>
		                        <page string="Uncharged Amounts">
		                            <field name="uncharged_ids" mode="tree" nolabel="1">
		                                <tree string="Uncharged Amounts">
		                                    <field name="name"/>
		                                    <field name="amount"/>
		                                </tree>
		                            </field>
		                        </page>
                            </notebook>
                        </page>
                        <page string="Voucher Transfers">
                            <field name="voucher_transfer_lines" mode="tree,form" nolabel="1">
                                <tree string="Missionary Voucher Distribution">
                                    <field name="name" readonly="1"/>
                                    <field name="comment" readonly="1"/>
                                    <field name="account_name" readonly="1"/>
                                    <field name="amount" readonly="1" sum="Total"/>
                                </tree>
                                <form string="Missionary Voucher Distribution">
                                    <field name="name" readonly="1"/>
                                    <field name="comment" readonly="1"/>
                                    <field name="account_name" invisible="1"/>
                                    <field name="account_id" on_change="onchange_account(account_id)"/>
                                    <field name="analytic_account_id" on_change="onchange_analytic(analytic_account_id)"/>
                                    <field name="amount" readonly="1"/>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>        
        <record model="ir.ui.view" id="voucher_distribution_tree">
            <field name="name">voucher.distribution.tree</field>
            <field name="model">voucher.distribution</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Voucher Distribution">
                    <field name="name"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_voucher_distribution_form">
            <field name="name">Voucher Distribution</field>
            <field name="res_model">voucher.distribution</field>
            <field name="view_type">form</field>
        </record>
        
        
        
        
        
        <!-- VOucher DIstribution Canada and US -->
        
        
         <record id="voucher_distribution_rule_form" model="ir.ui.view">
            <field name="name">voucher.distribution.rule.form</field>
            <field name="model">voucher.distribution.rule</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string = "Voucher Distribution Rule">
                    <field name="name"/>
                    <field name="name2"/>
                    <field name="account_id"/>
                    <field name="condition"/>
                </form>
            </field>
        </record>        
        <record model="ir.ui.view" id="voucher_distribution_rule_tree">
            <field name="name">voucher.distribution.rule.tree</field>
            <field name="model">voucher.distribution.rule</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Voucher Distribution Rules">
                    <field name="name"/>
                    <field name="name2"/>
                    <field name="account_id"/>
                    <field name="condition"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_voucher_distribution_rule_form">
            <field name="name">Voucher Distribution Rules</field>
            <field name="res_model">voucher.distribution.rule</field>
            <field name="view_type">form</field>
        </record>
        
        
        
        <record id="email_charging_account_form" model="ir.ui.view">
            <field name="name">email.charging.account.form</field>
            <field name="model">email.charging.account</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string = "Email Charging Account">
                    <field name="name"/>
                    <field name="description"/>
                    <field name="account_id"/>
                </form>
            </field>
        </record>        
        <record model="ir.ui.view" id="email_charging_account_tree">
            <field name="name">email.charging.account.tree</field>
            <field name="model">email.charging.account</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Email Charging Accounts">
                    <field name="name"/>
                    <field name="description"/>
                    <field name="account_id"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_email_charging_account_form">
            <field name="name">Email Charging Accounts</field>
            <field name="res_model">email.charging.account</field>
            <field name="view_type">form</field>
        </record>
        
        
        
        
        <record id="voucher_distribution_philnational_form" model="ir.ui.view">
            <field name="name">voucher.distribution.missionaries.form</field>
            <field name="model">voucher.distribution.missionaries</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string = "Missionary Distribution Reference">
                    <field name="name" select="1"/>
                    <field name="account_id"/>
                    <field name="national"/>
                </form>
            </field>
        </record>        
        <record model="ir.ui.view" id="voucher_distribution_philnational_tree">
            <field name="name">voucher.distribution.missionaries.tree</field>
            <field name="model">voucher.distribution.missionaries</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Missionary Distribution Reference">
                    <field name="name"/>
                    <field name="account_id"/>
                    <field name="national"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_voucher_distribution_philnational_form">
            <field name="name">Missionary Distribution Reference</field>
            <field name="res_model">voucher.distribution.missionaries</field>
            <field name="view_type">form</field>
        </record>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <record id="voucher_distribution_account_assignment_form" model="ir.ui.view">
            <field name="name">voucher.distribution.account.assignment.form</field>
            <field name="model">voucher.distribution.account.assignment</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string = "Voucher Distribution Account Assignment">
                    <group colspan="4" col="4">
                        <group colspan="2" col="2">
                            <separator string="Rule Values" colspan="2"/>
                            <field name="name" select="1" required="1"/>
                            <field name="field2match" required="1"/>
                            <field name="match_rule" required="1"/>
                        </group>
                        <group colspan="2" col="2">
                            <separator string="Account Values" colspan="2"/>
                            <field name="account_type" required="1"/>
                            <field name="account_id" attrs="{'readonly':[('account_type','=','analytic')],'required':[('account_type','=','normal')]}"/>
                            <field name="analytic_id" attrs="{'readonly':[('account_type','=','normal')],'required':[('account_type','=','analytic')]}"/>
                        </group>
                    </group>
                </form>
            </field>
        </record>        
        <record model="ir.ui.view" id="voucher_distribution_account_assignment_tree">
            <field name="name">voucher.distribution.account.assignment.tree</field>
            <field name="model">voucher.distribution.account.assignment</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Voucher Distribution Account Assignment">
                    <field name="name"/>
                    <field name="field2match"/>
                    <field name="match_rule"/>
                    <field name="account_type"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_voucher_distribution_account_assignment_form">
            <field name="name">Voucher Distribution Account Assignment</field>
            <field name="res_model">voucher.distribution.account.assignment</field>
            <field name="view_type">form</field>
        </record>
        
        
    </data>
</openerp>
